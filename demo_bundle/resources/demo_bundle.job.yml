variables:
  my_lookup_cluster_id:
    description: "ID of existing cluster found by name"
    lookup:
      cluster: "Simbus_DBRX_Cluster"

  my_notebook_path:
    description: "Path to base folder of notebooks"
    type: string
    default: "/Workspace/Users/${workspace.current_user.userName}/demo_bundle/src"

  input_table:
    description: "Demo input table name"
    type: string
    default: "demo_input_table"

  output_table:
    description: "Demo output table name"
    type: string
    default: "demo_output_table"


resources:
  jobs:
    demo_variables_job:
      name: "Demo Variables Job"
      tasks:
        - task_key: ingest
          existing_cluster_id: ${var.my_lookup_cluster_id}
          notebook_task:
            notebook_path: ${var.my_notebook_path}/Notebook_1
            base_parameters:
              input_table: ${var.input_table}

        - task_key: transform
          existing_cluster_id: ${var.my_lookup_cluster_id}
          depends_on:
             task_key: ingest
          notebook_task:
            notebook_path: ${var.my_notebook_path}/Notebook_2
            base_parameters:
              input_table: ${var.input_table}
              output_table: ${var.output_table}
